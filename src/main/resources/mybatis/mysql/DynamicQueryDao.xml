<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kaisn.dao.IDynamicQueryDao">

    <select id="querySql" parameterType="com.kaisn.mysql.QueryParam" resultType="java.util.Map">
        SELECT
        <if test="columnList != null and columnList.size>0">
            <foreach collection="columnList" item="column" separator=",">
                ${column}
            </foreach>
        </if>
        from ${tableName}
        <where>
            <if test="outWhereList != null and outWhereList.size>0">
                <foreach collection="outWhereList" item="outWhere">
                    ${outWhere.logic}
                    (
                    <if test="outWhere.inWhereList != null and outWhere.inWhereList.size>0">
                        <foreach collection="outWhere.inWhereList" item="inWhere">
                            ${inWhere.logic} ${inWhere.column} ${inWhere.relat} #{inWhere.value}
                        </foreach>
                    </if>
                    )
                </foreach>
            </if>
        </where>
        <if test="groupByList != null and groupByList.size>0">
            group by
            <foreach collection="groupByList" item="groupBy" separator=",">
                ${groupBy.column} ${groupBy.sort}
            </foreach>
        </if>
        <if test="rows>0">
            limit #{offset},#{rows}
        </if>
    </select>
</mapper>